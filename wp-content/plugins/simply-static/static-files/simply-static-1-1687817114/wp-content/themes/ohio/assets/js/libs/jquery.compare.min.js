!function(e){e.fn.compare=function(t){return t=e.extend({default_offset_pct:.5,orientation:"horizontal",before_label:"Modified",after_label:"Original",no_overlay:!1,move_slider_on_hover:!1,move_with_handle_only:!0,click_to_move:!1},t),this.each(function(){var a=t.default_offset_pct,o=e(this),i=t.orientation,n="vertical"===i?"down":"left",r="vertical"===i?"up":"right";if(o.wrap("<div class='compare-wrapper compare-"+i+"'></div>"),!t.no_overlay){o.append("<div class='compare-overlay'></div>");var c=o.find(".compare-overlay");c.append("<div class='compare-before-label' data-content='"+t.before_label+"'></div>"),c.append("<div class='compare-after-label' data-content='"+t.after_label+"'></div>")}var s=o.find("img:first"),d=o.find("img:last");o.append("<div class='compare-handle'></div>");var l=o.find(".compare-handle");function p(e){var t=function(e){var t=s.width(),a=s.height();return{w:t+"px",h:a+"px",cw:e*t+"px",ch:e*a+"px"}}(e);l.css("vertical"===i?"top":"left","vertical"===i?t.ch:t.cw),function(e){"vertical"===i?(s.css("clip","rect(0,"+e.w+","+e.ch+",0)"),d.css("clip","rect("+e.ch+","+e.w+","+e.h+",0)")):(s.css("clip","rect(0,"+e.cw+","+e.h+",0)"),d.css("clip","rect(0,"+e.w+","+e.h+","+e.cw+")")),o.css("height",e.h)}(t)}function f(e,t){return function(e,t,a){return Math.max(0,Math.min(1,e))}("vertical"===i?(t-_)/g:(e-u)/w)}function v(e){(e.distX>e.distY&&e.distX<-e.distY||e.distX<e.distY&&e.distX>-e.distY)&&"vertical"!==i?e.preventDefault():(e.distX<e.distY&&e.distX<-e.distY||e.distX>e.distY&&e.distX>-e.distY)&&"vertical"===i&&e.preventDefault(),o.addClass("active"),u=o.offset().left,_=o.offset().top,w=s.width(),g=s.height()}function h(e){o.hasClass("active")&&p(a=f(e.pageX,e.pageY))}function m(){o.removeClass("active")}l.append("<span class='compare-"+n+"-arrow'></span>"),l.append("<span class='compare-"+r+"-arrow'></span>"),o.addClass("compare-container"),s.addClass("compare-before"),d.addClass("compare-after"),e(window).on("resize.compare",function(e){p(a)});var u=0,_=0,w=0,g=0,b=t.move_with_handle_only?l:o;b.on("movestart",v),b.on("move",h),b.on("moveend",m),t.move_slider_on_hover&&(o.on("mouseenter",v),o.on("mousemove",h),o.on("mouseleave",m)),l.on("touchmove",function(e){e.preventDefault()}),o.find("img").on("mousedown",function(e){e.preventDefault()}),t.click_to_move&&o.on("click",function(e){u=o.offset().left,_=o.offset().top,w=s.width(),g=s.height(),p(a=f(e.pageX,e.pageY))}),e(window).trigger("resize.compare")})}}(jQuery);